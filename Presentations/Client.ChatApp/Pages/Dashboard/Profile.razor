@page "/Profile/{profileId}"

@inject ContactRPCs.ContactRPCsClient _contactService;
@inject NavigationManager _navManager;


<div class="container">
   <div class="profile">

       <div class="info">
            <div class="logo"></div>
            <div class="user-data">
                <div>@ProfileId</div>
            </div>        
       </div>      
        <div class="dropdown-divider"></div>      
        <div class="description">
            <p>Hi There ! </p>
            <p>I am a web developer.</p>
            <p>my ... are :</p>
            <ul>
                <li>C#</li>
                <li>Asp.net Core</li>
            </ul>
        </div>
        <div class="dropdown-divider"></div>
        <div class="controls">
            <button class="btn btn-outline-info" hidden="@(!isValidUserName)">@ButtonName</button>
        </div>
   </div>
 
</div>

@code {


    [Parameter]
    public string ProfileId { get; set; } = "ProfileId1";

    private bool isValidUserName = false;
    private bool ExistInContacts = false;
    private string ButtonName => ExistInContacts ?  "Dialog" : "Request";

    private List<ErrorInfo> Errors = [];

    protected override async Task OnInitializedAsync() {
        var result = await _contactService.IsInContactsAsync(new ContactMsg() { ProfileId = ProfileId});
        Errors.AddRange(result.Messages);
        foreach(var error in result.Messages) {
            if(error.Code == "Invalid-ProfileId") {

            }
        }

        if(result.IsSuccessful) {
            _navManager.NavigateTo("/");
            return;
        }

    }

    



}
